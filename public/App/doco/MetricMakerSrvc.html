<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <link rel="stylesheet" href="../css/CTV2_Common.css">
    <link rel="stylesheet" href="../css/CreateReport.css">
    <link rel="stylesheet" href="../../../bower_components/bootstrap/dist/css/bootstrap.css">

    <link href='http://fonts.googleapis.com/css?family=Pontano+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">

    <script src="../../../bower_components/jquery/dist/jquery.js"></script>
    <script src="../../../bower_components/underscore/underscore.js"></script>
    <script src="../../../bower_components/angular/angular.js"></script>

    <script src="../../../external_components/angular-dragdrop.min.js"></script>
    <script src="../../../external_components/draganddrop.js"></script>
    <script src="../appCreateReport.js"></script>
    <script src="../ReportDataService.js"></script>


    <script src="../../../external_components/ng-google-chart.js"></script>
    <script src="../../superViz/superViz.js"></script>
    <script src="../MetricMakerSrvc.js"></script>
    <script src="../../superViz/svOptionsPanel/svOptionsPanel.js"></script>
    <script src="../../superViz/testChartContainer/testChartContainer.js"></script>

    <script src="../../../external_components/textAngular.js"></script>
    <script src="../../../external_components/textAngular-sanitize.js"></script>
    <script src="../../../external_components/textAngularSetup.js"></script>
    <script src="../../../bower_components/angular-resource/angular-resource.js"></script>
    <script src="../../../bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="../../../bower_components/angular-bootstrap/ui-bootstrap.js"></script>
    <script src="../../../bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>

    <script src="../../../external_components/kdmDevTools/kdmDevToolsApp.js"></script>

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/default.min.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script type="text/javascript">
        appCreateReport.controller('superVisTestCtrl',function($scope, MetricMakerSrvc){
            $scope.MetricMakerSrvc=MetricMakerSrvc;
        })
    </script>

    <title></title>
    <style>
        h4 {
            font-size: large;
            margin-top: 60px;
            font-weight: bold;
        }

        body {
            padding: 50px
        }

        li {
            margin-top: 30px;
        }
    </style>
</head>
<body ng-app="AppCreateReport" ng-controller="superVisTestCtrl">


<!--------------METRICMAKERSRVC---------------------->

<h4>MetricMakerSrvc</h4>

<ul>
    <!----Supported Visualization Types---->
    <li>Supported Visualization Types (MetricMakerSrvc.visualizationTypes):
        <br/>
        <br/>
        The visualizationTypes property exposes a list of visualizations the MetricMakerSrvc knows how to work with.<br/><br/>
        <ul><pre style="width:400px"><code>MetricMakerSrvc.visualizationTypes</code></pre><br/>

            <div ng-repeat="vt in MetricMakerSrvc.visualizationTypes | orderBy:'toString()'">{{vt}}</div>

        </ul>
    </li>

    <!----- preMadeMetrics------->
    <li>preMadeMetrics -- In order to allow users to easly drag a question onto the report grid we need to support the
        concept of premade metrics. A visualization does not depend directly on base datatypes, but on a <i>metric</i>.
        Additionally, metrics are not necessarily compatable with just any base datatype.
        <style>
            #superviztesttblpremademetrics thead {
                font-weight: bold;
            }

            #superviztesttblpremademetrics td {
                border: 1px gray solid;
                padding: 5px;
                margin: 5px;
            }
        </style>
        <ul><br/>
            The following table is derived from the following MetricMakerSrvc property:
            <pre style="width:400px"><code>MetricMakerSrvc.preMadeMetrics</code></pre>
            <table id="superviztesttblpremademetrics" style="border: 1px gray solid;padding: 5px;width:900px;">
                <thead>
                <tr>
                    <td>Name</td>
                    <td>Description</td>
                    <td>Valid Vizualizations</td>
                </tr>
                </thead>
                <tr ng-repeat="pm in MetricMakerSrvc.preMadeMetrics">

                    <td>{{pm.name}}</td>
                    <td>{{pm.description}}</td>
                    <td><span ng-repeat="vv in pm.validVisualizations">{{vv}}, </span></td>

                </tr>
            </table>
            <br/>
        </ul>
    </li>

    <!------------defaultVisualizations------------------>
    <li>CTDataTypes and corresponding default metrics and default visualization types.
        <style>
            #superviztesttbllegalvisualizations thead {
                font-weight: bold;
            }

            #superviztesttbllegalvisualizations td {
                border: 1px gray solid;
                padding: 5px;
            }
        </style>
        <ul><p><br/>
            The following table is derived from the following MetricMakerSrvc property:
            <pre style="width:400px"><code>MetricMakerSrvc.defaultVisualizations</code></pre>

            <table id="superviztesttbllegalvisualizations" style="border: 1px gray solid;padding: 5px">
                <thead>
                <td>CTDataType</td>
                <td>Default Metric</td>
                <td>Default Vizualization</td>
                </thead>
                <tr ng-repeat="lv in MetricMakerSrvc.defaultVisualizations | orderBy:'ctdatatype'">

                    <td>{{lv.ctdatatype}}</td>
                    <td>{{lv.defaultmetric}}</td>
                    <td>{{lv.defaultvisualization}}</td>

                </tr>
            </table></p>
        </ul>

    </li>
    <li>A Sample Metric -- http://dv-estoredev-01:8081/CTV2API/api/Metric/10</li>
    <pre><code>
        &lt;Metric xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/DalObjects.Reporting">
            &lt;CreatedBy>1&lt;/CreatedBy>
            &lt;CreatedOn>2014-08-07T19:50:42.1236913Z&lt;/CreatedOn>
            &lt;Id>10&lt;/Id>
            &lt;Title>UnitTestReport_Title_8/7/2014 7:50:42 PM&lt;/Title>
            &lt;AdvancedMetric i:nil="true">&lt;/AdvancedMetric>
            &lt;Aggregate i:nil="true">&lt;/Aggregate>
            &lt;Query>
                &lt;Fields>
                    &lt;CommonFields>LocationName&lt;/CommonFields>
                    &lt;CommonFields>State&lt;/CommonFields>
                &lt;/Fields>
                &lt;Filters>
                    &lt;Filter>
                        &lt;Conjunction>None&lt;/Conjunction>
                        &lt;LeftHandSide>
                            &lt;CommonField i:nil="true">&lt;/CommonField>
                            &lt;QuestionBaseId>19&lt;/QuestionBaseId>
                        &lt;/LeftHandSide>
                        &lt;Operator>GreaterThan&lt;/Operator>
                        &lt;RightHandSide>12&lt;/RightHandSide>
                    &lt;/Filter>
                &lt;/Filters>
                &lt;IsPivoted>false&lt;/IsPivoted>
                &lt;OrderBy>
                    &lt;QueryOrdinal>
                        &lt;Ordinal>1&lt;/Ordinal>
                        &lt;QuestionBaseId>19&lt;/QuestionBaseId>
                    &lt;/QueryOrdinal>
                &lt;/OrderBy>
                &lt;Questions>
                    &lt;QueryQuestion>
                        &lt;Alias>Currency Alias On 8/7/2014 7:50:42 PM&lt;/Alias>
                        &lt;BaseId>19&lt;/BaseId>
                        &lt;Ordinal>0&lt;/Ordinal>
                    &lt;/QueryQuestion>
                &lt;/Questions>
                &lt;Sources>
                    &lt;QuerySource>
                        &lt;Id>6&lt;/Id>
                        &lt;Type>Template&lt;/Type>
                    &lt;/QuerySource>
                &lt;/Sources>
            &lt;/Query>
            &lt;TrendMetric i:nil="true">&lt;/TrendMetric>
        &lt;/Metric>

    </code></pre>
</ul>


<kdm-navigation></kdm-navigation>
</body>
</html>